/* ==========================================================================
   Config
   ========================================================================== */

$finder-indent-level-support: 10 !default;

/* ==========================================================================
   Styles
   ========================================================================== */
.finder {
  padding-top: $layout-spacing-base;
}

.finder__group {
  margin: 0 $layout-spacing-base/2 $layout-spacing-base / 1.5;

  &-title {
    display: block;
    text-transform: uppercase;
    color: $neutral-base;
    font-weight: $typo-weight-semi-bold;
    font-size: $typo-size-small;
    margin-bottom: $layout-spacing-base / 1.6;
    padding-left: $layout-spacing-base/2;
  }
}

.finder__item-content {
  padding: 0 $layout-spacing-base/2;
  display: flex;
  
  height: 30px;
  line-height: 30px;
  transition: height 200ms;

  .icon path {
    fill: $neutral-base;
  }

  .button:hover path,
  .dropdown-gc.is-active path,
  &.is-active .finder__item-link path {
    fill: $primary-blue;
  }
}

.finder__item-content-inner {
  display: flex;
  width: 100%;
}

.finder__item-settings {
  margin-left: auto;
  flex-shrink: 0;
  padding-left: $layout-spacing-base/4;
  .button, .dropdown-gc {
    vertical-align: text-bottom;
  }
  .button + .dropdown-gc {
    margin-left: $layout-spacing-base/2;
  }
}

.finder__settings-dropdown {
  top: - $layout-spacing-base/2
}

.finder__item-link {
  @include text-overflow-ellipsis();
  flex-shrink: 1;
  cursor: pointer;

  &:focus {
    outline: none;
  }
}

.finder__item-no-indentation, .finder__item {
  color: $neutral-dark;
  font-size: $typo-size-base;
  margin: $layout-spacing-base / 4 0;

  &-link {
    color: $neutral-dark;
    text-decoration: none;
    display: flex;
    align-items: center;
    .finder__group-title
    &:hover {
      color: $primary-blue;
    }
  }

  .finder__group > div:last-child > .finder__item {
    margin-bottom: 0;
  }

  &-link-icon {
    margin-right: $layout-spacing-base/4 + $layout-spacing-base/2;
    height: $icon-height;
    width: $icon-width;
    display: flex;
  }
}
.finder__item-no-indentation {
  margin: 0;
}

/* ==========================================================================
   Modifiers
   ========================================================================== */

.finder__item.is-active > .finder__item-content {
  background: white;
  border-radius: $layout-spacing-base/4;

  .finder__item-link {
    color: $primary-blue;
  }

  path {
    fill: $primary-blue;
  }
}

.finder__item--hover-settings .finder__item-content .finder__item-settings {
  display: none;
}

.finder__item--hover-settings .finder__item-content:hover .finder__item-settings {
  display: flex;
}

.finder__item.is-over.dragged-insert > .finder__item-content,
.finder__item--selected > .finder__item-content {
  border: 2px solid $primary-blue;
  padding: 0 $layout-spacing-base/2 - 2;
  border-radius: 3px;

  .finder__item-content-inner {
    width: 100%;
    padding: ($layout-spacing-base/4 + $layout-spacing-base/10 - 2) 0;
  }
}

.finder__item.is-over.dragged-top > .finder__item-content,
.finder__item.is-over.dragged-below > .finder__item-content {
  border: none;
  border-radius: 0;
  padding: 0 $layout-spacing-base/2;
  position: relative;

  .finder__item-content-inner {
    position: relative;
    padding: ($layout-spacing-base/4 + $layout-spacing-base/10) 0 ($layout-spacing-base/4 + $layout-spacing-base/10 - 2);

    &:before,
    &:after {
      content: ' ';
      position: absolute;
      width: 6px;
      height: 6px;
      background: $primary-blue;
      border-radius: $layout-spacing-base;
      left:0;
    }

    &:after {
      right: 0;
      margin-left: auto;
    }
  }
}

.finder__item.is-over.dragged-top > .finder__item-content .finder__item-content-inner {
  border-top: 2px solid $primary-blue;
  top: -2px;
  &:before,
  &:after {
    top: -4px
  }
}

.finder__item.is-over.dragged-below > .finder__item-content .finder__item-content-inner {
  border-bottom: 2px solid $primary-blue;
  &:before,
  &:after {
    bottom: -4px
  }
}

.finder__item-content--hidden {
  height: 0px;
}


/* ==========================================================================
   Indentation
   ========================================================================== */

@for $i from 1 through $finder-indent-level-support {
  $finderItemSelector: '.finder__item';

  @for $l from 1 through $i {
    $finderItemSelector: '#{$finderItemSelector} .finder__item';
  }

  #{$finderItemSelector}.finder__item.is-over.dragged-insert > .finder__item-content,
  #{$finderItemSelector}.finder__item--selected > .finder__item-content {
    padding-left: ($layout-spacing-base * 1.5 * $i) + ($layout-spacing-base/2 + $i*1) - 2;
  }

  #{$finderItemSelector} > .finder__item-content,
  #{$finderItemSelector}.finder__item.is-over.dragged-top > .finder__item-content,
  #{$finderItemSelector}.finder__item.is-over.dragged-below > .finder__item-content {
    padding-left: ($layout-spacing-base * 1.5 * $i) + $layout-spacing-base/2 + $i*1;
  }
}