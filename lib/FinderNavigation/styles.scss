$finder-indent-level-support: 10 !default;

.finder__group {
  margin: $layout-spacing-base $layout-spacing-base/2;
  &--title {
    display: block;
    text-transform: uppercase;
    color: $neutral-base;
    font-weight: $typo-weight-semi-bold;
    font-size: $typo-size-small;
    margin-bottom: $layout-spacing-base/2;
    padding-left: $layout-spacing-base/2;
  }
}

.finder__item--content {
  padding: 0 $layout-spacing-base/2;
  display: flex;
}

.finder__item--content-inner {
  width: 100%;
  padding: ($layout-spacing-base/4 + $layout-spacing-base/10) 0;
}

.finder__item--settings {
  margin-left: auto;
  flex-shrink: 0;
  padding-left: $layout-spacing-base/4;
  .icon path {
    fill: $neutral-darkest;
  }
  .is-active {
    .icon path {
      fill: $primary-blue;
    }
  }
  .button + .dropdown-gc {
    margin-left: $layout-spacing-base/2;
  }
}

.finder__settings--dropdown {
  top: - $layout-spacing-base/2
}

.finder__item--link {
  @include text-overflow-ellipsis();
  flex-shrink: 1;
}

.finder__item {
  color: $neutral-dark;
  font-size: $typo-size-lead;
  &--link {
    color: $neutral-dark;
    text-decoration: none;
    display: block;
    &:hover {
      color: $primary-blue;
    }
  }
  &--link-icon {
    margin-right: $layout-spacing-base/4 + $layout-spacing-base/2;
    vertical-align: text-top;
    height: $icon-height;
    width: $icon-width;
    path {
      fill: $neutral-darkest;
    }
  }
}

/* ==========================================================================
   Modifiers
   ========================================================================== */

.finder__item.is-active {
  & > .finder__item--content {
    background: white;
    border-radius: $layout-spacing-base/4;
    .finder__item--link {
      color: $primary-blue;
    }
  }
  .finder__item .icon path {
    fill: $neutral-darkest;
  }
}

.finder__item--hover-settings {
  .finder__item--settings {
    display: none;
  }
}

.finder__item--hover-settings:hover,
.finder__item--hover-settings .finder__item--content:hover {
  & > .finder__item--settings {
    display: block;
  }
}

.finder__item.is-over.dragged-insert > .finder__item--content,
.finder__item--selected > .finder__item--content {
  border: 2px solid $primary-blue;
  padding: 0 $layout-spacing-base/2 - 2;
  border-radius: 3px;
  .finder__item--content-inner {
    width: 100%;
    padding: ($layout-spacing-base/4 + $layout-spacing-base/10 - 2) 0;
  }
}

.finder__item.is-over.dragged-top > .finder__item--content,
.finder__item.is-over.dragged-below > .finder__item--content {
  border: none;
  border-radius: 0px;
  padding: 0 $layout-spacing-base/2;
  position: relative;
  .finder__item--content-inner {
    position: relative;
    padding: ($layout-spacing-base/4 + $layout-spacing-base/10) 0 ($layout-spacing-base/4 + $layout-spacing-base/10 - 2);
    &:before,
    &:after {
      content: ' ';
      position: absolute;
      width: 6px;
      height: 6px;
      background: $primary-blue;
      border-radius: $layout-spacing-base;
      left:0;
    }
    &:after {
      right: 0;
      margin-left: auto;
    }
  }
}

.finder__item.is-over.dragged-top > .finder__item--content .finder__item--content-inner {
  border-top: 2px solid $primary-blue;
  top: -2px;
  &:before,
  &:after {
    top: -4px
  }
}

.finder__item.is-over.dragged-below > .finder__item--content .finder__item--content-inner {
  border-bottom: 2px solid $primary-blue;
  &:before,
  &:after {
    bottom: -4px
  }
}

/* ==========================================================================
   Indentation
   ========================================================================== */

@for $i from 1 through $finder-indent-level-support {
  $finderItemSelector: '.finder__item';

  @for $l from 1 through $i {
    $finderItemSelector: '#{$finderItemSelector} .finder__item';
  }

  #{$finderItemSelector}.finder__item.is-over.dragged-insert > .finder__item--content,
  #{$finderItemSelector}.finder__item--selected > .finder__item--content {
    padding-left: ($layout-spacing-base*$i) + ($layout-spacing-base/2 - 2);
  }

  #{$finderItemSelector} > .finder__item--content,
  #{$finderItemSelector}.finder__item.is-over.dragged-top > .finder__item--content,
  #{$finderItemSelector}.finder__item.is-over.dragged-below > .finder__item--content {
    padding-left: ($layout-spacing-base*$i) + $layout-spacing-base/2;
  }
}
