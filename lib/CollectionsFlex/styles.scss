/* ==========================================================================
   Config
   ========================================================================== */
$collections-flex-spacing: $layout-spacing-base/4 0;
$collections-flex-content-padding: $collections-table-content-padding;
$collections-flex-border: $collections-table-border;
$collections-flex-selected-border: $collections-table-selected-border;
$collections-flex-border-radius: $collections-table-border-radius;

/* ==========================================================================
   Styles
   ========================================================================== */

.collections-flex {
  display: flex;
  flex-flow: column nowrap;
  font-size: .8rem;
  margin: 0.5rem;
  line-height: 1.5;
  flex: 1 1 auto;
  color: $neutral-base;
  a {
    @include link-hover-underline();
  }
}

.collections-flex__row {
  width: 100%;
  display: flex;
  flex-flow: row nowrap;
  padding: $collections-flex-spacing;
  &:first-child {
    padding-top: 0;
  }
}


.collections-flex__heading,
.collections-flex__cell {
  display: flex;
  flex-flow: row nowrap;
  flex-grow: 1;
  flex-basis: 0;
  word-break: break-word;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0px;
  white-space: nowrap;
  &:first-child {
    flex-basis: 20%;

    @include respond-to-min($screen-lg) {
      flex-basis: 30%;
    }
  }
}

.collections-flex__cell {
  border: $collections-flex-border;
  border-width: 1px 0;
  &:first-child {
    border-width: 1px 0 1px 1px;
    border-radius: $collections-flex-border-radius 0 0 $collections-flex-border-radius;
  }
  &:last-child {
    border-width: 1px 1px 1px 0;
    border-radius: 0 $collections-flex-border-radius $collections-flex-border-radius 0;
  }
}

.collections-flex__cell-content {
  overflow: hidden;
  display: flex;
  align-items: center;
  padding: $collections-flex-content-padding;
}

.collections-flex__heading {
  font-weight: bold;
  padding: $collections-flex-content-padding;
}

/* ==========================================================================
   Modifiers
   ========================================================================== */

.collections-flex__row--selected {
  .collections-flex__cell {
    border: $collections-table-selected-border;
    border-width: 2px 0;
    &:first-child {
      border-width: 2px 0 2px 2px;
    }
    &:last-child {
      border-width: 2px 2px 2px 0;
    }
  }
}


.collections-flex__cell-content--allow-overflow {
  overflow: visible;
}

.collections-flex__row--disabled {
  opacity: 0.5;
}

.collections-flex__row.is-over {
  position: relative;
  .collections-flex__cell:first-child {
    &:before {
      content: ' ';
      border-bottom: 2px solid $primary-blue;
      left: 0;
      width: 100%;
      position: absolute;
    }
  }
  &:before,
  &:after {
    content: ' ';
    position: absolute;
    width: 6px;
    height: 6px;
    background: $primary-blue;
    border-radius: $layout-spacing-base;
    left:0;
  }
  &:after {
    right: 0;
    margin-left: auto;
  }
  &.dragged-top {
    .collections-flex__cell:first-child:before {
      top: -1px;
    }
    &:before,
    &:after {
      top: -3px
    }
  }
  &.dragged-bottom {
    .collections-flex__cell:first-child:before {
      bottom: -1px;
    }
    &:before,
    &:after {
      bottom: -3px
    }
  }
}
